{
  "tests": [
    {
      "name": "Register Armid Test Player",
      "cmd": "auth.register",
      "register_if_missing": true,
      "data": {
        "username": "test_armid_player",
        "passwd": "password123"
      },
      "expect": {
        "status": "ok"
      }
    },
    {
      "name": "Auth and get player info",
      "cmd": "auth.login",
      "data": {
        "username": "test_armid_player",
        "passwd": "password123"
      },
      "expect": {
        "status": "ok"
      },
      "capture": {
        "my_id": "data.player_id",
        "curSector": "data.current_sector"
      }
    },
    {
      "name": "Ensure Sector 6 Exists",
      "cmd": "sys.raw_sql_exec",
      "data": {
        "sql": "INSERT OR IGNORE INTO sectors (id, name) VALUES (6, 'Test Sector 6');"
      },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "Ensure Sector 100 Exists",
      "cmd": "sys.raw_sql_exec",
      "data": {
        "sql": "INSERT OR IGNORE INTO sectors (id, name) VALUES (100, 'Test Sector 100');"
      },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "Create Warp Link 6 -> 100",
      "cmd": "sys.raw_sql_exec",
      "data": {
        "sql": "INSERT OR IGNORE INTO sector_warps (from_sector, to_sector) VALUES (6, 100);"
      },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "Enter sector with no Armids",
      "cmd": "move.warp",
      "data": {
        "from_sector_id": "@curSector",
        "to_sector_id": 100
      },
      "expect": {
        "status": "ok",
        "type": "move.result",
        "data": {
          "from": "@curSector",
          "to": 100,
          "turns_spent": "*",
          "encounter": null
        }
      },
      "capture": {
        "curSector": "data.to"
      }
    }
  ]
}