--- Running TWClone Protocol Tests ---
Using file: tests_all.json
[register user] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "auth.session"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:51Z", "status": "error", "type": "error", "error": {"code": 1210, "message": "Username already exists"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[register user again (should fail)] PASS  (status=error, type=error)
[login user] PASS  (status=ok, type=auth.session)
[hello] PASS  (status=ok, type=session.hello)
[capabilities] PASS  (status=ok, type=system.capabilities)
[ping] PASS  (status=ok, type=session.pong)
[player.my_info] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "player.info"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:51Z", "status": "error", "type": "error", "error": {"code": 1503, "message": "Database error"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[ship.info] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "ship.info"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:51Z", "status": "error", "type": "error", "error": {"code": 1500, "message": "Database error"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[sector.info (capture @curSector)] PASS  (status=ok, type=sector.info)
[move.scan] PASS  (status=ok, type=sector.scan_v1)
[player.list_online] FAIL  (status=ok, type=player.list_online)
  expect: {"status": "ok", "type": "players.online", "data": {"players": "*array"}}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:52Z", "status": "ok", "type": "player.list_online", "data": {"players": [{"player_id": 32}]}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.port_info] FAIL  (status=refused, type=error)
  expect: {"status": "ok", "type": "trade.port_info", "data": {"ports": "*array"}}
  actual: {"id": "srv-refuse", "ts": "2025-11-04T15:04:52Z", "status": "refused", "type": "error", "error": {"code": 1404, "message": "No port in this sector"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.buy 10 organics] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "trade.receipt"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "Missing required field or invalid quantity"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.sell 5 organics] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "trade.receipt"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 400, "message": "items[] required."}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[buy more than port has] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "Missing required field or invalid quantity"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[sell more than ship has] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 400, "message": "items[] required."}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[buy commodity not sold at port] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "Missing required field or invalid quantity"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[sell commodity not bought at port] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 400, "message": "items[] required."}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[deploy fighters (amount=1, DEFEND)] ASSERT FAIL  (status=error, type=error)
  - assert == failed at data.amount: actual=None expected=1
  - assert == failed at data.offense: actual=None expected=2
  - assert == failed at data.sector_id: actual=None expected=' @curSector'
[fighters.list — current sector] FAIL  (status=ok, type=Deploy.fighters.list_v1)
  expect: {"status": "ok", "type": "*", "data": {"total": ">=0"}}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:52Z", "status": "ok", "type": "Deploy.fighters.list_v1", "data": {"total": 0}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[mines.list — current sector (all types)] FAIL  (status=ok, type=deploy.mines.list_v1)
  expect: {"status": "ok", "type": "*", "data": {"total": ">=0"}}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:52Z", "status": "ok", "type": "deploy.mines.list_v1", "data": {"total": 0}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[deploy fighters with invalid offense] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "offense must be one of {1=TOLL,2=DEFEND,3=ATTACK}"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[deploy more fighters than available] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1401, "message": "Unable to resolve current sector"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[fighters.list in other sector] PASS  (status=ok, type=Deploy.fighters.list_v1)
[move.warp to sector 2] ASSERT FAIL  (status=error, type=error)
  - assert == failed at data.sector_id: actual=None expected=2
[sector.set_beacon] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "sector.beacon"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1300, "message": "Invalid request schema"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[warp to current sector] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "Missing required field"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[warp to non-existent sector] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "Missing required field"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[pathfind with valid path] FAIL  (status=error, type=error)
  expect: {"status": "ok", "type": "move.path"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1401, "message": "Target sector not specified"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[pathfind with invalid path] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:52Z", "status": "error", "type": "error", "error": {"code": 1401, "message": "Target sector not specified"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[get player settings] PASS  (status=ok, type=player.settings_v1)
[set prefs] PASS  (status=ok, type=player.prefs.updated)
[get prefs] PASS  (status=ok, type=player.prefs_v1)
[bulk execute] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: bulk.execute"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[admin notice] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: admin.notice"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[subscribe to topic] FAIL  (status=ok, type=subscribe.added)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:53Z", "status": "ok", "type": "subscribe.added", "data": {"event_type": "sector.*"}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[s2s heartbeat] PASS  (status=refused, type=error)
[build citadel] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[send mail] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1301, "message": "Missing required field: to/to_id and body"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[get planet info] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.info\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[ship.transfer_cargo] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"ship.transfer_cargo\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[ship.jettison] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"ship.jettison\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[ship.upgrade] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"ship.upgrade\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[ship.repair] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"ship.repair\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[ship.self_destruct] PASS  (status=refused, type=error)
[trade.quote] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: trade.quote"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.offer] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"trade.offer\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.accept] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"trade.accept\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.cancel] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"trade.cancel\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[trade.history] FAIL  (status=ok, type=trade.history)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:53Z", "status": "ok", "type": "trade.history", "data": {"history": []}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[move.autopilot.start] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1401, "message": "Target sector not specified"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[move.autopilot.stop] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"move.autopilot.stop\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[move.autopilot.status] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"move.autopilot.status\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[sector.search] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 500, "message": "no such column: p.sector_id"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[sector.scan.density] FAIL  (status=ok, type=sector.search_results_v1)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:53Z", "status": "ok", "type": "sector.search_results_v1", "data": {"items": [], "next_cursor": null}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.genesis] FAIL  (status=ok, type=sector.density.scan)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:53Z", "status": "ok", "type": "sector.density.scan", "data": [1, 650, 2, 110, 3, 110, 4, 110, 5, 110, 6, 110, 7, 110], "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.rename] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.genesis\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.land] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.rename\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.launch] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.land\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.transfer_ownership] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.launch\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.harvest] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.transfer_ownership\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.deposit] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.harvest\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[planet.withdraw] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.deposit\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[citadel.upgrade] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: \"planet.withdraw\""}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[combat.attack] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[combat.lay_mines] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1306, "message": "Missing or invalid fields: mine_type/amount"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[combat.sweep_mines] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:53Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[combat.status] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[chat.send] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[chat.broadcast] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[chat.history] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[mail.inbox] FAIL  (status=ok, type=mail.inbox_v1)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "mail.inbox_v1", "data": {"items": []}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[mail.read] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1301, "message": "Missing required field: id"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[mail.delete] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1900, "message": "Recipient not found or message not yours"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[sys.notice.create] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1300, "message": "Invalid request schema: ids[] required"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[notice.list] FAIL  (status=ok, type=announce.created)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "announce.created", "data": {"id": 9, "title": "test", "body": "test", "severity": "info"}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[notice.ack] FAIL  (status=ok, type=notice.list_v1)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "notice.list_v1", "data": {"items": [{"id": 9, "title": "test", "body": "test", "severity": "info", "created_at": 1762268694}, {"id": 8, "title": "test", "body": "test", "severity": "info", "created_at": 1762268637}, {"id": 7, "title": "test", "body": "test", "severity": "info", "created_at": 1762268603}, {"id": 6, "title": "test", "body": "test", "severity": "info", "created_at": 1762263229}, {"id": 5, "title": "test", "body": "test", "severity": "info", "created_at": 1762262558}, {"id": 4, "title": "test", "body": "test", "severity": "info", "created_at": 1762262526}, {"id": 3, "title": "test", "body": "test", "severity": "info", "created_at": 1762257893}, {"id": 2, "title": "test", "body": "test", "severity": "info", "created_at": 1762257878}, {"id": 1, "title": "test", "body": "test", "severity": "info", "created_at": 1762256350}]}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[subscribe.remove] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 400, "message": "id required"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[subscribe.list] FAIL  (status=ok, type=system.notice)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "system.notice", "data": {"id": 9, "ts": 1762268694, "title": "test", "body": "test", "severity": "info", "expires_at": null}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[subscribe.catalog] FAIL  (status=ok, type=subscribe.removed)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "subscribe.removed", "data": {"event_type": "sector.*"}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[admin.shutdown_warning] FAIL  (status=ok, type=subscribe.list)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "subscribe.list", "data": {"items": [{"event_type": "global", "locked": 1, "enabled": 1, "delivery": "push", "filter": null}, {"event_type": "player.32", "locked": 1, "enabled": 1, "delivery": "push", "filter": null}, {"event_type": "system.notice", "locked": 1, "enabled": 1, "delivery": "internal", "filter": null}, {"event_type": "sector.*", "locked": 0, "enabled": 0, "delivery": "push", "filter": null}, {"event_type": "system.*", "locked": 0, "enabled": 1, "delivery": "push", "filter": null}]}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[s2s.planet.genesis] FAIL  (status=ok, type=subscribe.catalog_v1)
  expect: {"status": "refused"}
  actual: {"id": "srv-ok", "ts": "2025-11-04T15:04:54Z", "status": "ok", "type": "subscribe.catalog_v1", "data": {"topics": [{"pattern": "system.notice", "kind": "exact", "desc": "Server notices & maintenance"}, {"pattern": "system.events", "kind": "exact", "desc": "Raw system events stream (structured)"}, {"pattern": "broadcast.global", "kind": "exact"}, {"pattern": "sector.*", "kind": "wildcard", "desc": "All sector-scoped events; use sector.{id} pattern, e.g., sector.42", "example": "sector.42"}, {"pattern": "corp.*", "kind": "wildcard", "example": "corp.42"}, {"pattern": "player.*", "kind": "wildcard", "example": "player.42"}, {"pattern": "chat.global", "kind": "exact", "desc": "Global chat/subspace mirror"}, {"pattern": "corp.mail", "kind": "exact", "desc": "Corporation mail (membership required)"}, {"pattern": "corp.log", "kind": "exact", "desc": "Corporation activity log (membership required)"}, {"pattern": "iss.move", "kind": "exact"}, {"pattern": "iss.warp", "kind": "exact"}, {"pattern": "npc.*", "kind": "wildcard", "example": "npc.42"}, {"pattern": "nav.*", "kind": "wildcard", "example": "nav.42"}, {"pattern": "chat.*", "kind": "wildcard", "example": "chat.42"}, {"pattern": "engine.tick", "kind": "exact"}, {"pattern": "sector.notice", "kind": "exact"}]}, "error": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[s2s.planet.transfer] FAIL  (status=error, type=error)
  expect: {"status": "refused"}
  actual: {"id": "srv-err", "ts": "2025-11-04T15:04:54Z", "status": "error", "type": "error", "error": {"code": 1101, "message": "Not implemented: admin.shutdown_warning"}, "data": null, "meta": {"rate_limit": {"limit": 60, "remaining": 60, "reset": 60}}}
[s2s.player.migrate] PASS  (status=refused, type=error)
[s2s.port.restock] PASS  (status=refused, type=error)
[s2s.event.relay] PASS  (status=refused, type=error)
