{
  "name": "Auth & Session Regression",
  "version": "2.0.0",
  "protocol_category": "05_Authentication",
  "description": "Coverage for session management and system introspection commands",
  "tests": [
    {
      "name": "Setup: Auth User",
      "setup": "macro_auth_user",
      "user": "auth_tester",
      "passwd": "password"
    },
    {
      "name": "System Hello",
      "command": "system.hello",
      "user": "auth_tester",
      "expect": {
        "status": "ok",
        "server": { "type": "string" },
        "version": { "type": "string" }
      }
    },
    {
      "name": "System Capabilities",
      "command": "system.capabilities",
      "user": "auth_tester",
      "expect": {
        "status": "ok",
        "capabilities": { "type": "object" }
      }
    },
    {
      "name": "System Command List",
      "command": "system.cmd_list",
      "user": "auth_tester",
      "expect": {
        "status": "ok",
        "commands": { "type": "array" }
      }
    },
    {
      "name": "System Schema List",
      "command": "system.schema_list",
      "user": "auth_tester",
      "expect": {
        "status": "ok",
        "schemas": { "type": "array" }
      }
    },
    {
      "name": "System Describe Schema",
      "command": "system.describe_schema",
      "data": { "name": "auth" },
      "user": "auth_tester",
      "expect": {
        "status": "ok",
        "schema": { "type": "object" }
      }
    },
    {
      "name": "Player Ping",
      "command": "player.ping",
      "user": "auth_tester",
      "expect": { "status": "ok" }
    },
    {
      "name": "Auth Refresh",
      "command": "auth.refresh",
      "user": "auth_tester",
      "expect": {
        "status": "ok",
        "session_token": { "type": "string" },
        "expires_at": { "type": "integer" }
      }
    },
    {
      "name": "Auth Logout",
      "command": "auth.logout",
      "user": "auth_tester",
      "expect": { "status": "ok" }
    },
    {
      "name": "Verify Logout (Ping Fail)",
      "command": "player.ping",
      "user": "auth_tester",
      "expect": { "error_code": 1001 }
    }
  ]
}
