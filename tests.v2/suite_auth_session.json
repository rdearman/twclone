{
  "tests": [
    {
      "name": "Setup: User",
      "setup": "macro_auth_user",
      "username": "session_user",
      "password": "password"
    },
    {
      "name": "System Hello",
      "command": "session.hello",
      "expect": { "status": "ok" }
    },
    {
      "name": "System Capabilities",
      "command": "system.capabilities",
      "expect": { "status": "ok" }
    },
    {
      "name": "System Command List",
      "command": "system.cmd_list",
      "expect": { "status": "ok" }
    },
    {
      "name": "System Schema List",
      "command": "system.schemas",
      "expect": { "status": "ok" }
    },
    {
      "name": "System Describe Schema",
      "command": "system.schema_describe",
      "data": { "schema": "auth.login" },
      "expect": { "status": "ok" }
    },
    {
      "name": "Player Ping",
      "command": "session.ping",
      "user": "session_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Auth Refresh",
      "command": "auth.refresh",
      "data": { "session_token": "@session" },
      "user": "session_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Auth Logout",
      "command": "auth.logout",
      "user": "session_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Verify Logout (Ping Fail)",
      "command": "player.my_info",
      "user": "session_user",
      "expect": { "status": "refused", "error_code": 1700 }
    }
  ]
}