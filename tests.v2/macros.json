{
  "macro_bootstrap_admin": [
    {
      "name": "Macro: Bootstrap Admin",
      "command": "auth.login",
      "data": { "username": "System", "passwd": "BOT" },
      "user": "admin",
      "save": { "session": "data.session_token", "admin_player_id": "data.player_id" },
      "stop_on_fail": true
    }
  ],
  "macro_auth_user": [
    {
      "setup": "macro_bootstrap_admin"
    },
    {
      "name": "Macro: Register User",
      "command": "auth.register",
      "data": { "username": "@username", "passwd": "@password" },
      "register_if_missing": true
    },
    {
      "name": "Macro: Login User",
      "command": "auth.login",
      "data": { "username": "@username", "passwd": "@password" },
      "user": "@username",
      "save": { "session": "data.session_token", "@{username}_player_id": "data.player_id" },
      "stop_on_fail": true
    }
  ]
}
