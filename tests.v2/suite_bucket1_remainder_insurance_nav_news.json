{
  "name": "Bucket 1 Remainder - Insurance, Nav, and News",
  "tests": [
    {
      "name": "Macro: Login User",
      "setup": "macro_auth_user",
      "username": "trader_player_1",
      "password": "password"
    },
    {
      "name": "Rig: Move Player to Sector 11",
      "command": "sys.raw_sql_exec",
      "data": { "sql": "UPDATE players SET sector_id = 11 WHERE player_id = @{trader_player_1_player_id};" },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "Rig: Move Ship to Sector 11",
      "command": "sys.raw_sql_exec",
      "data": { "sql": "UPDATE ships SET sector_id = 11 WHERE ship_id = (SELECT ship_id FROM players WHERE player_id = @{trader_player_1_player_id});" },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "insurance.policies.list - Positive",
      "command": "insurance.policies.list",
      "user": "trader_player_1",
      "expect": { "status": "ok" }
    },
    {
      "name": "insurance.policies.list - Negative (No Auth)",
      "command": "insurance.policies.list",
      "expect": { "status": "error", "error_code": 401 }
    },
    {
      "name": "nav.avoid.set - Positive",
      "command": "nav.avoid.set",
      "data": { "sectors": [10, 20] },
      "user": "trader_player_1",
      "expect": { "status": "ok" }
    },
    {
      "name": "nav.avoid.set - Negative (No Auth)",
      "command": "nav.avoid.set",
      "data": { "sectors": [10, 20] },
      "expect": { "status": "error", "error_code": 401 }
    },
    {
      "name": "nav.bookmark.set - Positive",
      "command": "nav.bookmark.set",
      "data": { "bookmarks": [ { "sector_id": 1, "note": "Home" } ] },
      "user": "trader_player_1",
      "expect": { "status": "ok" }
    },
    {
      "name": "nav.bookmark.set - Negative (No Auth)",
      "command": "nav.bookmark.set",
      "data": { "bookmarks": [ { "sector_id": 1, "note": "Home" } ] },
      "expect": { "status": "error", "error_code": 401 }
    },
    {
      "name": "sector.set_beacon - Positive",
      "command": "sector.set_beacon",
      "data": { "sector_id": 11, "text": "New Frontier" },
      "user": "trader_player_1",
      "expect": { "status": "ok" }
    },
    {
      "name": "sector.set_beacon - Negative (No Auth)",
      "command": "sector.set_beacon",
      "data": { "sector_id": 11, "text": "New Frontier" },
      "expect": { "status": "error", "error_code": 401 }
    },
    {
      "name": "news.mark_feed_read - Positive",
      "command": "news.mark_feed_read",
      "data": { "timestamp": 123456789 },
      "user": "trader_player_1",
      "expect": { "status": "ok" }
    },
    {
      "name": "news.mark_feed_read - Negative (No Auth)",
      "command": "news.mark_feed_read",
      "data": { "timestamp": 123456789 },
      "expect": { "status": "error", "error_code": 401 }
    }
  ]
}
