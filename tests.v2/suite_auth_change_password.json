{
  "tests": [
    {
      "name": "Setup: Register User",
      "setup": "macro_auth_user",
      "username": "pwd_user_v2",
      "password": "old_password"
    },
    {
      "name": "Change Password - Wrong Old Password",
      "command": "auth.change_password",
      "data": {
        "old_password": "wrong_password",
        "new_password": "new_password"
      },
      "user": "pwd_user_v2",
      "expect": {
        "status": "error",
        "error_code": 1101
      }
    },
    {
      "name": "Change Password - Success",
      "command": "auth.change_password",
      "data": {
        "old_password": "old_password",
        "new_password": "new_password"
      },
      "user": "pwd_user_v2",
      "expect": {
        "status": "ok",
        "data": {
          "success": true
        }
      }
    },
    {
      "name": "Login with Old Password (Fail)",
      "command": "auth.login",
      "data": {
        "username": "pwd_user_v2",
        "passwd": "old_password"
      },
      "expect": {
        "status": "error",
        "error_code": 1101
      }
    },
    {
      "name": "Login with New Password (Success)",
      "command": "auth.login",
      "data": {
        "username": "pwd_user_v2",
        "passwd": "new_password"
      },
      "expect": {
        "status": "ok"
      }
    }
  ]
}
