{
  "tests": [
    {
      "name": "Setup: User",
      "setup": "macro_auth_user",
      "username": "planet_tester_1",
      "password": "password"
    },
    {
      "name": "Rig: Clear Sector 500 Citadels",
      "command": "sys.raw_sql_exec",
      "data": { "sql": "DELETE FROM citadels WHERE planet_id IN (SELECT planet_id FROM planets WHERE sector_id = 500);" },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "Rig: Clear Sector 500 Planets",
      "command": "sys.raw_sql_exec",
      "data": { "sql": "DELETE FROM planets WHERE sector_id = 500;" },
      "user": "admin",
      "expect": { "status": "ok" }
    },
    {
      "name": "Create Planet (T2-01)",
      "command": "planet.genesis_create",
      "data": { "sector_id": 500, "name": "T201_Planet", "owner_entity_type": "player" },
      "user": "planet_tester_1",
      "save": { "t201_planet_id": "data.planet_id" },
      "expect": { "status": "ok" }
    },
    {
      "name": "Deposit Funds (T2-01)",
      "command": "planet.deposit",
      "data": { "planet_id": "@t201_planet_id", "amount": 10000 },
      "user": "planet_tester_1",
      "expect": { "status": "ok" }
    }
  ]
}
