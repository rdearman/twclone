{
  "test_suite_name": "Corporation Advanced",
  "description": "Advanced corp operations like dissolve and kick",
  "tests": [
    {
      "name": "Setup: CEO User",
      "setup": "macro_auth_user",
      "username": "ceo_user",
      "password": "password"
    },
    {
      "name": "Setup: Member User",
      "setup": "macro_auth_user",
      "username": "member_user",
      "password": "password"
    },
    {
      "name": "Setup: Create Corp",
      "command": "corp.create",
      "data": { "name": "AdvCorp" },
      "user": "ceo_user",
      "save": { "corp_id": "data.corp_id" },
      "expect": { "status": "ok" }
    },
    {
      "name": "Corp List",
      "command": "corp.list",
      "user": "ceo_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Corp Invite Member",
      "command": "corp.invite",
      "data": { "target_player_id": "@member_user_player_id" },
      "user": "ceo_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Corp Join (Member)",
      "command": "corp.join",
      "data": { "corp_id": "@corp_id" },
      "user": "member_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Corp Roster",
      "command": "corp.roster",
      "user": "ceo_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Corp Leave (Member Success)",
      "command": "corp.leave",
      "user": "member_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Corp Leave (Fail - CEO)",
      "command": "corp.leave",
      "user": "ceo_user",
      "expect": { "error_code": 606 }
    },
    {
      "name": "Corp Dissolve",
      "command": "corp.dissolve",
      "user": "ceo_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Verify Corp Dissolved (List)",
      "command": "corp.list",
      "user": "ceo_user",
      "expect": { "status": "ok" }
    }
  ]
}