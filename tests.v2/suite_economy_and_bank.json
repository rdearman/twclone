{
  "name": "Economy & Bank Regression",
  "version": "2.0.0",
  "protocol_category": "26_Banking",
  "description": "Coverage for bank transactions, deposits, withdrawals",
  "tests": [
    {
      "name": "Setup: User",
      "setup": "macro_auth_user",
      "username": "bank_user",
      "password": "password"
    },
    {
      "name": "Setup: Target User",
      "setup": "macro_auth_user",
      "username": "bank_target",
      "password": "password"
    },
    {
      "name": "Bank Balance (Initial)",
      "command": "bank.balance",
      "user": "bank_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Bank Deposit (Success)",
      "command": "bank.deposit",
      "data": { "amount": 100 },
      "user": "bank_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Bank Deposit (Insufficient Petty Cash)",
      "command": "bank.deposit",
      "data": { "amount": 1000000 },
      "user": "bank_user",
      "expect": { "error_code": 1403 }
    },
    {
      "name": "Bank Withdraw (Success)",
      "command": "bank.withdraw",
      "data": { "amount": 50 },
      "user": "bank_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Bank Withdraw (Insufficient Bank Funds)",
      "command": "bank.withdraw",
      "data": { "amount": 1000000 },
      "user": "bank_user",
      "expect": { "error_code": 1403 }
    },
    {
      "name": "Bank Transfer (Success)",
      "command": "bank.transfer",
      "data": { "recipient_type": "player", "recipient_id": "@bank_target_player_id", "amount": 10 },
      "user": "bank_user",
      "expect": { "status": "ok" }
    },
    {
      "name": "Bank Transfer (Insufficient Funds)",
      "command": "bank.transfer",
      "data": { "recipient_type": "player", "recipient_id": "@bank_target_player_id", "amount": 1000000 },
      "user": "bank_user",
      "expect": { "error_code": 1403 }
    },
    {
      "name": "Bank History",
      "command": "bank.history",
      "user": "bank_user",
      "expect": { "status": "ok" }
    }
  ]
}
