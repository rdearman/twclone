2025-11-16 12:42:22,728 - state_manager - INFO - Loaded state from state.json
2025-11-16 12:42:22,728 - state_manager - WARNING - Clearing cached world data to force re-exploration.
2025-11-16 12:42:22,728 - root - INFO - Successfully connected to game server at 127.0.0.1:1234
2025-11-16 12:42:22,728 - root - INFO - Sending command: {'id': 'c-a16e7f38', 'command': 'auth.login', 'data': {'password': 'quality', 'username': 'ai_qa_bot'}, 'meta': {'client_version': 'AI_QA_Bot/1.1', 'idempotency_key': 'a16e7f38-51ee-4bfa-a435-bbcd5feaf2ef'}}
2025-11-16 12:42:23,229 - root - INFO - Server response: {"id":"srv-ok","reply_to":"c-a16e7f38","ts":"2025-11-16T12:42:22Z","status":"ok","type":"auth.session","data":{"player_id":4,"current_sector":1,"unread_news_count":0,"session":"dadb3d34f9842f99742432bfdea5234299fb2b6c0081dc7e5e6ab9a0be3950b6"},"error":null,"meta":{"rate_limit":{"limit":60,"remaining":60,"reset":60}}}
2025-11-16 12:42:23,232 - root - INFO - Login successful (received auth.session). Session: dadb3d34f9842f99742432bfdea5234299fb2b6c0081dc7e5e6ab9a0be3950b6, PlayerID: 4
2025-11-16 12:42:23,232 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:42:37,856 - root - WARNING - LLM failed to provide a valid strategy plan from response.
2025-11-16 12:42:37,856 - planner - INFO - Invariant check: Missing sector_data for current sector 1. Fetching.
2025-11-16 12:42:37,856 - root - INFO - Sending command: {'id': 'c-29da4f37', 'command': 'sector.info', 'data': {'sector_id': 1}, 'meta': {'client_version': 'AI_QA_Bot/1.1', 'idempotency_key': '29da4f37-6a11-43fe-b7ad-d71e7c4cdba7'}}
2025-11-16 12:42:38,357 - root - INFO - Server response: {"id":"srv-ok","reply_to":"c-29da4f37","ts":"2025-11-16T12:42:37Z","status":"ok","type":"sector.info","data":{"sector_id":1,"name":"Fedspace 1","adjacent":[2,3,4,5,6,7],"adjacent_count":6,"ports":[{"id":1,"name":"Earth Port","type":"1"}],"has_port":true,"players":[],"players_count":0,"beacons":[],"beacons_count":0,"planets":[],"has_planet":false,"planets_count":0,"beacon":"The Federation -- Do Not Dump!","has_beacon":true,"ships":[{"id":1,"name":"Bit Banger","type":"Merchant Cruiser","ship_name":"Bit Banger","ship_type":"Merchant Cruiser","owner":"derelict"},{"id":2,"name":"QA Bot 1","type":"Scout Marauder","ship_name":"QA Bot 1","ship_type":"Scout Marauder","owner":"ai_qa_bot"}],"ships_count":2,"ports_count":1,"counts":{"fighters":0,"mines_armid":1,"mines_limpet":0,"mines":1}},"error":null,"meta":{"rate_limit":{"limit":60,"remaining":60,"reset":60}}}
2025-11-16 12:42:38,365 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:44:38,498 - llm_client - ERROR - Error connecting to Ollama at http://localhost:11434/api/generate. Is it running? Error: timed out
2025-11-16 12:44:38,499 - root - WARNING - LLM failed to provide a valid strategy plan from response.
2025-11-16 12:44:38,499 - planner - INFO - Bandit selected action: trade.port_info for stage survey
2025-11-16 12:44:38,503 - root - INFO - Sending command: {'id': 'c-b687d058', 'command': 'trade.port_info', 'data': {'port_id': 1}, 'meta': {'client_version': 'AI_QA_Bot/1.1', 'idempotency_key': 'b687d058-4014-4656-bf41-7843a883ea10'}}
2025-11-16 12:44:39,003 - root - INFO - Server response: {"id":"srv-ok","reply_to":"c-b687d058","ts":"2025-11-16T12:44:38Z","status":"ok","type":"trade.port_info","data":{"port":{"id":1,"number":1,"name":"Earth Port","sector":1,"size":10,"techlevel":10,"ore_on_hand":10000,"organics_on_hand":10000,"equipment_on_hand":10000,"petty_cash":0,"credits":0,"type":1}},"error":null,"meta":{"rate_limit":{"limit":60,"remaining":60,"reset":60}}}
2025-11-16 12:44:39,004 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:44:49,857 - root - WARNING - LLM failed to provide a valid strategy plan from response.
2025-11-16 12:44:49,857 - planner - INFO - Bandit selected action: trade.quote for stage survey
2025-11-16 12:44:49,863 - root - INFO - Sending command: {'id': 'c-100352c4', 'command': 'trade.quote', 'data': {'port_id': 1, 'commodity': 'ORE', 'quantity': 1}, 'meta': {'client_version': 'AI_QA_Bot/1.1', 'idempotency_key': '100352c4-c8e0-4347-98f4-aa117dd511fc'}}
2025-11-16 12:44:50,363 - root - INFO - Server response: {"id":"srv-ok","reply_to":"c-100352c4","ts":"2025-11-16T12:44:49Z","status":"ok","type":"trade.quote","data":{"port_id":1,"commodity":"ORE","quantity":1,"buy_price":131.0,"sell_price":74.0,"total_buy_price":131,"total_sell_price":74},"error":null,"meta":{"rate_limit":{"limit":60,"remaining":60,"reset":60}}}
2025-11-16 12:44:50,364 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:44:56,012 - root - WARNING - LLM failed to provide a valid strategy plan from response.
2025-11-16 12:44:56,012 - planner - INFO - Bandit selected action: move.warp for stage exploit
2025-11-16 12:44:56,018 - root - INFO - Sending command: {'id': 'c-c9e882bc', 'command': 'move.warp', 'data': {'sector_id': 2, 'ship_id': 2}, 'meta': {'client_version': 'AI_QA_Bot/1.1'}}
2025-11-16 12:44:56,519 - root - INFO - Server response: {"id":"srv-err","reply_to":"c-c9e882bc","ts":"2025-11-16T12:44:56Z","status":"error","type":"error","error":{"code":1306,"message":"Missing required field"},"data":null,"meta":{"rate_limit":{"limit":60,"remaining":60,"reset":60}}}
2025-11-16 12:44:56,519 - root - WARNING - Server refused command 'unknown': Missing required field (Code: 1306)
2025-11-16 12:44:56,519 - state_manager - WARNING - Command unknown failed 1 time(s). Backing off for 10 sec.
2025-11-16 12:44:56,523 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:45:04,398 - root - INFO - LLM provided new strategy: ['sell: ORE', 'buy: ORGANICS']
2025-11-16 12:45:04,399 - root - INFO - Current strategic goal: sell: ORE
2025-11-16 12:45:04,399 - planner - WARNING - Goal 'sell' failed: no 'ORE' in cargo.
2025-11-16 12:45:04,400 - planner - INFO - Bandit selected action: trade.buy for stage exploit
2025-11-16 12:45:04,400 - planner - ERROR - No payload function found for action: trade.buy (tried _payload_trade_buy)
2025-11-16 12:45:04,400 - root - WARNING - Planner failed to execute goal 'sell: ORE'. Clearing strategy to get a new one.
2025-11-16 12:45:04,904 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:45:17,448 - root - INFO - LLM provided new strategy: ['goto: 1', 'sell: ORE', 'buy: ORGANICS']
2025-11-16 12:45:17,449 - root - INFO - Current strategic goal: goto: 1
2025-11-16 12:45:17,450 - planner - INFO - Bandit selected action: move.warp for stage exploit
2025-11-16 12:45:17,458 - root - INFO - Sending command: {'id': 'c-128a5351', 'command': 'move.warp', 'data': {'sector_id': 2, 'ship_id': 2}, 'meta': {'client_version': 'AI_QA_Bot/1.1'}}
2025-11-16 12:45:17,960 - root - INFO - Server response: {"id":"srv-err","reply_to":"c-128a5351","ts":"2025-11-16T12:45:17Z","status":"error","type":"error","error":{"code":1306,"message":"Missing required field"},"data":null,"meta":{"rate_limit":{"limit":60,"remaining":60,"reset":60}}}
2025-11-16 12:45:17,960 - root - WARNING - Server refused command 'unknown': Missing required field (Code: 1306)
2025-11-16 12:45:17,960 - state_manager - WARNING - Command unknown failed 2 time(s). Backing off for 20 sec.
2025-11-16 12:45:17,961 - root - ERROR - Goal-related error: Missing required field. Clearing plan.
2025-11-16 12:45:17,968 - root - INFO - Strategy plan is empty. Requesting a new one from LLM.
2025-11-16 12:46:20,686 - root - INFO - Shutdown signal received. Exiting.
2025-11-16 12:46:20,688 - root - INFO - Disconnected from game server.
2025-11-16 12:46:20,689 - root - INFO - Bot has shut down.
